<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Sequoia • Rsequoia2</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sequoia">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Rsequoia2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/analysis_units.html">Analysis units</a></li>
    <li><a class="dropdown-item" href="../articles/cadastral-parcels-fr.html">Parcelles Cadastrales</a></li>
    <li><a class="dropdown-item" href="../articles/cadastral-parcels-legal-entity-fr.html">Parcelles cadastrales - Personne morale (FR)</a></li>
    <li><a class="dropdown-item" href="../articles/cadastral-parcels-legal-entity.html">Cadastral parcels - legal entity (FR)</a></li>
    <li><a class="dropdown-item" href="../articles/cadastral-parcels.html">Cadastral parcels</a></li>
    <li><a class="dropdown-item" href="../articles/sequoia-fr.html">Sequoia</a></li>
    <li><a class="dropdown-item" href="../articles/sequoia.html">Sequoia</a></li>
    <li><a class="dropdown-item" href="../articles/vecteurs.html">Téléchargement de données</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Sequoia</h1>
            
      

      <div class="d-none name"><code>sequoia-fr.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html" class="external-link">opts_chunk</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span></span>
<span>  fig.width <span class="op">=</span> <span class="fl">7.291667</span>,</span>
<span>  collapse <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  comment <span class="op">=</span> <span class="st">"#&gt;"</span>,</span>
<span>  dpi <span class="op">=</span> <span class="fl">300</span>,</span>
<span>  out.width <span class="op">=</span> <span class="st">"100%"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mucau.github.io/Rsequoia2/">Rsequoia2</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Attempting to load the package cache ... No cache found.</span></span>
<span><span class="co">#&gt; Will try to reconfigure qgisprocess and build new cache ...</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-tmap/tmap" class="external-link">tmap</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://janmarvin.github.io/openxlsx2/" class="external-link">openxlsx2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Linking to GEOS 3.12.1, GDAL 3.8.4, PROJ 9.4.0; sf_use_s2() is TRUE</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-tmap/tmap" class="external-link">tmap</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tmap_options.html" class="external-link">tmap_options</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="sequoia">Sequoia<a class="anchor" aria-label="anchor" href="#sequoia"></a>
</h2>
<div class="section level3">
<h3 id="quest-ce-que-sequoia">Qu’est-ce que Sequoia<a class="anchor" aria-label="anchor" href="#quest-ce-que-sequoia"></a>
</h3>
<p>Sequoia est une approche de la gestion forestière, reposant sur des
choix assumés afin de guider l’utilisateur vers des pratiques cohérentes
et reproductibles. Son objectif est de</p>
<ul>
<li>Faciliter le téléchargement des données nécessaires à la gestion
forestière ;</li>
<li>Normaliser les données (nommage et structure) ;</li>
<li>Faciliter l’exploration et l’analyse de ces données.</li>
</ul>
</div>
<div class="section level3">
<h3 id="quest-ce-que-le-processus-sequoia">Qu’est-ce que le processus Sequoia<a class="anchor" aria-label="anchor" href="#quest-ce-que-le-processus-sequoia"></a>
</h3>
<p>Un processus Sequoia comprend toujours les étapes suivantes :</p>
<ul>
<li>Définition d’un répertoire de travail ;</li>
<li>Création d’une matrice cadastrales ;</li>
<li>Téléchargement des parcelles cadastrales ;</li>
<li>Téléchargement des données utiles à la gestion forestière ;</li>
<li>Analyse SIG pour créer des unités d’analyse ;</li>
<li>Génération des couches de gestion à partir des unités
d’analyse.</li>
</ul>
<p>Pour vous guider a travers ces différentes étapes,
<code>Rsequoia2</code> propose la fonction <code><a href="../reference/sequoia.html">sequoia()</a></code>. Cette
dernière ouvre un menu dans la console pour faciliter l’accès aux
fonctionnalités.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sequoia.html">sequoia</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Amusez-vous bien ! ### Définir un répertoire</p>
<p>Toutes les fonctions principale de <code>Rsequoia2</code> disposent
de l’argument <code>dirname = "."</code>, ce qui signifie qu’elles
utilisent par défaut le répertoire de travail courant. Il est recommandé
de créer un répertoire dédié et de le définir comme répertoire de
travail de la session R.</p>
<p>Dans cet exemple, une forêt nommée <code>"ECKMUHL"</code> est
utilisée :</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sequoia_dir</span> <span class="op">&lt;-</span> <span class="st">"ECKMUHL"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">sequoia_dir</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># définir le répertoire de travail</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="va">sequoia_dir</span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="créer-la-matrice-cadastrale">Créer la matrice cadastrale<a class="anchor" aria-label="anchor" href="#cr%C3%A9er-la-matrice-cadastrale"></a>
</h4>
<p><code>Rsequoia2</code> propose plusieurs méthodes pour générer ce
fichier :</p>
<ul>
<li>Création d’une matrice vierge complétée manuellement (voir l’article
Parcelles cadastrales);</li>
<li>Recherche des parcelles pour les personne morale et génération
automatique de la matrice (voir l’article Parcelles cadastrales -
Personnes morales);</li>
<li>Convertion des matrices PDF de la DGFiP en fichier excel</li>
</ul>
</div>
<div class="section level4">
<h4 id="télécharger-la-géométrie-des-parcelles-cadastrales">Télécharger la géométrie des parcelles cadastrales<a class="anchor" aria-label="anchor" href="#t%C3%A9l%C3%A9charger-la-g%C3%A9om%C3%A9trie-des-parcelles-cadastrales"></a>
</h4>
<p>Toutes les données téléchargées par <code>Rsequoia2</code> reposent
sur les parcelles cadastrales (couche parca). La première étape
obligatoire consiste donc à les télécharger avec :</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/seq_parca.html">seq_parca</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="télécharger-les-données">Télécharger les données<a class="anchor" aria-label="anchor" href="#t%C3%A9l%C3%A9charger-les-donn%C3%A9es"></a>
</h4>
<p><code>Rsequoia2</code> propose de nombreux jeux de données,
téléchargeables via les fonctions <code>seq_*</code> :</p>
<ul>
<li>Données environnementales du MNHN (<code><a href="../reference/seq_mnhn.html">seq_mnhn()</a></code>);</li>
<li>Données altimétriques de l’IGN (<code><a href="../reference/seq_elevation.html">seq_elevation()</a></code>);</li>
<li>Orthophotographies de l’IGN (<code><a href="../reference/seq_ortho.html">seq_ortho()</a></code>);</li>
<li>Données géologiques du BRGM (<code><a href="../reference/seq_geol.html">seq_geol()</a></code>);</li>
<li>Données hydrologiques de la BD Topo IGN
(<code><a href="../reference/seq_hydro.html">seq_hydro()</a></code>);</li>
<li>Données patrimoniales de l’Atlas du Patrimoine
(<code><a href="../reference/seq_patrimony.html">seq_patrimony()</a></code>);</li>
<li>…</li>
</ul>
<p>Exemple :</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/seq_mnhn.html">seq_mnhn</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="unités-danalyse">Unités d’analyse<a class="anchor" aria-label="anchor" href="#unit%C3%A9s-danalyse"></a>
</h4>
<p>L’étape suivante, après le téléchargement du parca et des jeux de
données complémentaires, consiste à créer les unités d’analyse.</p>
<p>Cette couche est générée avec :</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/seq_parca_to_ua.html">seq_parca_to_ua</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>La couche UA doit alors être travailer sur un logiciel SIG pour
qu’elle reflète fidèlement la structure forestière réelle.</p>
<p>Ce travail est souvent réalisé en deux étapes : - Une
photo-interpétation ; - Une phase terrain pour préciser</p>
<p>Pour plus de détails, consultez l’article sur les unités
d’analyse.</p>
</div>
<div class="section level4">
<h4 id="finalisation-de-la-couche">Finalisation de la couche<a class="anchor" aria-label="anchor" href="#finalisation-de-la-couche"></a>
</h4>
<p>Une fois que la couche UA est complétée, il est nécessaire de la
valider :</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/seq_ua.html">seq_ua</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Cette fonction effectue une série de vérifications et de corrections
:</p>
<ul>
<li>Elle vérifie la cohérence des identifiants cadastraux (IDU) entre UA
et PARCA ;</li>
<li>Elle assure la correspondance des surfaces cadastrales entre UA et
PARCA en corrigeant les écarts éventuels ;</li>
<li>Elle génère un identifiant standardisé pour chaque unité de gestion
(ensemble d’UA cohérentes entre-elles);</li>
<li>Elle calcule les surfaces cadastrales corrigées à partir des
surfaces cartographiques ;</li>
<li>Elle vérifie la cohérence des unités de gestion ;</li>
<li>Elle détecte et corrige les incohérences mineures ;</li>
<li>Elle nettoie la topologie des géométries.</li>
</ul>
</div>
<div class="section level4">
<h4 id="synthèse">Synthèse<a class="anchor" aria-label="anchor" href="#synth%C3%A8se"></a>
</h4>
<p>La dernière étape consiste à générer des tableaux de synthèse
facilitant l’analyse et la rédaction du document de gestion forestière
:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/seq_summary.html">seq_summary</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Cette fonction produit un ensemble de tableaux de synthèse
standardisés à partir de la couche UA.</p>
</div>
</div>
<div class="section level3">
<h3 id="fonctionnement-interne">Fonctionnement interne<a class="anchor" aria-label="anchor" href="#fonctionnement-interne"></a>
</h3>
<div class="section level4">
<h4 id="configuration-interne">Configuration interne<a class="anchor" aria-label="anchor" href="#configuration-interne"></a>
</h4>
<p><code>Rsequoia2</code> repose sur une configuration interne qui
associe des clés aux couches de données et à leurs métadonnées.</p>
<p>Par exemple, la clé <code>"r.sol.geol"</code> correspond à la couche
raster géologique “GEOL.tif”.</p>
<p>Toutes les clés disponibles peuvent être listées avec :</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/seq_key.html">seq_key</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Pour accéder aux métadonnées d’une couche spécifique :</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/seq_layer.html">seq_layer</a></span><span class="op">(</span><span class="st">"r.sol.geol"</span><span class="op">)</span></span></code></pre></div>
<p>Les clés partielles sont également acceptées :</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/seq_layer.html">seq_layer</a></span><span class="op">(</span><span class="st">"geol"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="fonctions-seq_">Fonctions <code>seq_*</code><a class="anchor" aria-label="anchor" href="#fonctions-seq_"></a>
</h4>
<p>Toutes les fonctions principales commencent par <code>seq_*</code>
(ex : <code><a href="../reference/seq_geol.html">seq_geol()</a></code>, <code><a href="../reference/seq_prsf.html">seq_prsf()</a></code>, …).</p>
<p>Ces fonctions ont toutes le même fonctionnement :</p>
<ul>
<li>Elles lisent les parcelles cadastrales du projet pour définir
l’emprise d’étude ;</li>
<li>Elles téléchargent les données nécessaires ;</li>
<li>Elles les enregistrent selon la configuration standardisée (nom et
extension) ;</li>
<li>Elles renvoient le ou les chemins vers les fichiers générés.</li>
</ul>
<p>Pour les utilisateurs avancés, chaque fonction <code>seq_*</code>
possède un équivalent <code>get_*</code> (ex : <code>get_geol()</code>,
<code><a href="../reference/get_prsf.html">get_prsf()</a></code>, …) utilisable indépendamment du workflow
Sequoia.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthieu Chevereau, Paul Carteron.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
