% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/normalize.R
\name{seq_normalize}
\alias{seq_normalize}
\title{Normalize a data frame according to Sequoia table definitions}
\usage{
seq_normalize(x, table)
}
\arguments{
\item{x}{\code{data.frame} to normalize.}

\item{table}{\code{character} A single table name as defined in
\code{config/seq_tables.yaml}.}
}
\value{
A normalized \code{data.frame} matching the structure required by the
selected Sequoia table.
}
\description{
\code{seq_normalize()} standardizes the structure of a \code{data.frame} using the
Sequoia configuration stored in \code{inst/config/seq_fields.yaml} and
\code{seq_tables.yaml}.
}
\details{
The normalization process applies, in order:
\enumerate{
\item \strong{Field renaming} using configured aliases
\item \strong{Field selection}: add missing required fields and drop invalid ones
\item \strong{Type coercion} to the classes defined in the configuration
\item \strong{Column reordering} according to the table definition
}

This ensures that the resulting data frame matches exactly the schema
expected for the selected Sequoia table.

\strong{Field aliases} defined in \code{seq_fields.yaml} allow multiple column names
(e.g. \code{"foret"}, \code{"id"}) to be mapped to the canonical field name
(e.g. \code{"IDENTIFIANT"}).
Aliases are automatically detected and replaced during normalization.

For example, if the configuration contains:

\if{html}{\out{<div class="sourceCode yaml">}}\preformatted{id:
  name: "IDENTIFIANT"
  alias: ["id", "foret"]
}\if{html}{\out{</div>}}

Then:

\if{html}{\out{<div class="sourceCode r">}}\preformatted{names(df)
#> c("foret", "contenance")

df <- seq_normalize(df, "parca")

names(df)
#> c("IDENTIFIANT", "SURF_CAD")
}\if{html}{\out{</div>}}
}
